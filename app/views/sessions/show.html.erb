<% content_for(:title, 'Account') %>

<div class="mx-auto xl:w-3/4 px-12 w-full pt-20">

  <h1 class="font-bold text-4xl">Account (<%= @current_user.email %>)</h1>

  <%= form_with model: @current_user, class: "contents" do |form| %>
    <%= render "users/fields_for", form: form %>

    <div class="col-span-6 sm:flex sm:items-center sm:gap-4">
      <div class="inline">
        <%= form.submit "Update account", class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white inline-block font-medium cursor-pointer" %>
        <%= link_to :session, data: { turbo_method: :delete }, class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-red-600 hover:bg-red-500 text-white inline-block font-medium cursor-pointer" do %>
          Sign out
        <% end %>
      </div>
    </div>
  <% end %>
  <div class="my-4">
    <h1 class="font-bold text-4xl mb-4">Subscription</h1>
    <%= form_with url: subscribe_path, data: { turbo: false } do |form| %>
      <ul role="list" class="space-y-8 md:grid md:grid-cols-2 md:space-y-0">
        <%= render "subscriptions/beta" do %>
          <% if @current_user.beta_subscription? %>
            <%= button_tag :submit,
              class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-green-100 border-green-600 hover:border-green-500 text-black inline-block font-medium cursor-pointer" do %>
              Your current plan
            <% end %>
          <% else %>        
            <%= button_tag :submit,
              class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-green-600 hover:bg-green-500 text-white inline-block font-medium cursor-pointer" do %>
              Downgrade your plan.
            <% end %>
          <% end %>
        <% end %>
        <%= render "subscriptions/sustaining" do %>
          <% if @current_user.sustaining_subscription? %>
            <%= button_tag :submit,
              class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-green-100 border-green-600 hover:border-green-500 text-black inline-block font-medium cursor-pointer" do %>
              Your current plan!
            <% end %>
          <% else %>        
            <%= button_tag :submit,
              class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-green-600 hover:bg-green-500 text-white inline-block font-medium cursor-pointer" do %>
              Upgrade your plan!
            <% end %>
          <% end %>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>